# 2

Step 2 describes the next key component of React: manipulating the DOM.

Now we have replaced React's `createElement()` function. Next, we need to replace the other React line from earlier:

```js
ReactDOM.render(element, container)
```

*At this point, we are only **adding** to the DOM*

Updated Rereact core library object and example usage:

```js
const Rereact = {
  createElement,
  render,
}

// Example render() usage:

Rereact.render(element, container)
```

Looking at the function call (our end goal), we can see that we expect 2 things:
- What are we rendering?
- Where do we render it?

So, we pass the element to be rendered and the parent that it will be contained within. With that in mind, we can create the render() function:

```js
function render(element, container) {
  // Instantiate the element
  const dom =
    element.type == "TEXT_ELEMENT" // We still have to be considerate of primitive types here
      ? document.createTextNode("")
      : document.createElement(element.type)

  // Assign the element props to the node
  const isProperty = key => key !== "children" // The children prop is handled separately, so we define a helper function here to check if the prop key is 'children'. Returns true/false
  Object.keys(element.props)
    .filter(isProperty) // Exclude the 'children' prop from being assigned
    .forEach(name => { // Assign each prop key-value pair to the dom element in a loop
      dom[name] = element.props[name]
    })

  element.props.children.foreach(child => // Recursively render the element's children
    render(child, dom)
  )

  container.appendChild(dom) // Append dom element to the parent container/element
}
```

This will successfully render React-style code to the DOM.